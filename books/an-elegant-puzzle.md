---
title: エレガントパズルを読んで
date: 2024-12-26
---

# エレガントパズルを読んで

## 概要
- 著者: Will Larson
- 原題: An Elegant Puzzle: Systems of Engineering Management
- An Elegant Puzzle is a masterful study of the challenges and demands of the discipline of engineering management viewed through the prism of systems thinking.

### 序文

> 「人は会社を去るのではなくマネジャーのものを去る」という言葉がある。マネジメントはあらゆる組織で重要だが、どうするべきかだれからも教わらないことが多く、構造化もされていない。複雑なマネジメントの課題に対してよい解決策を得られるか否かで、チームが満足するか不満を感じるかの違いが生まれる。そして最終的には、企業の成否を左右する。

この序文のかっこ書きを見かけて、この本を読むことを決めた。
思い当たる節がありすぎる（メンバーとしても、マネージャーとしても）


### 第1章：導入

### 第2章：組織

#### 組織：機能する組織を作り、維持する

> 本章では、私が効果的だと考える組織デザインと発展のアプローチを説明する。読み終えてみて「簡単そうだな」と思っていただけたなら、我が意を得たり、といった感じだ。難しいのは、組織の状態が厳しくなった時に立ち向かい勇気を持ち続けることである。

うまく言語化できないが、これを言える人になりたい。「自分は難しいことをしている」という不要な自尊心を捨てることを覚える。

#### 2.1 チームのサイズを決める

> 組織デザインの基礎的な課題はチームのサイズを決めること

> **マネジャーは６～８人のエンジニアを支援すべき**
> この原則により、マネジャーは積極的なコーチングや調整、戦略立案を通じたチームミッションの推進、変革の主導などに十分な時間を確保できる。

- ４人未満のエンジニアを支援するマネジャーは**テックリードマネジャー**として機能することが多いが、マネジャーとして成長するにはマネジメントスキルの向上に集中するための時間が不足しており、スタッフエンジニアに進むには技術的な詳細に取り組む時間が不足している。
- ９～１０人のエンジニアをサポートするマネジャーは**コーチ**（または問題に対するセーフティネット）としてふるまうが、忙しすぎて自分のチームや責任範囲に積極的に関与できない。
- **マネジャーのマネジャー**は４～６人のマネジャーを支援すべき。
  - ４人未満のマネジャーをサポートするマネジャーは移行期にのみ導入すべき。安定状態の時に導入すると同僚から「活躍していない」と見られたり、よくない印象を与える。
  - ７人以上のマネジャーをサポートするコーチポジションのマネジャーが生まれると、問題解決のコーチとしてのみ機能するようになってしまう。

> **（４人未満の）小さなチームはチームではない。**

- チームの重要な要素の１つは個人が構成している複雑性がチーム単位に抽象化されること。小さなチームは抽象化に漏れが多く、個人で動く場合と見分けがつかない。
- 小さなチームは壊れやすい。１人去るだけで技術負債をこれ以上増やさないためにトイル（手作業で繰り返し行われる作業）をこなす状態に陥る。

- 既存のチームが運用で身動きが取れない一方で、イノベーションのために新しいチームを作るのはよくあるやり方（思い当たる節がとてもある）。以下の原則を守ってチームを分割していくことが大事。しかし、あらゆる例外を制限する高速具ではないため、慎重に検討する必要が大事。
    > - 安定した状態のチームは６人から８人とする。
    > - 新しいチームを作り、そのチームが８人から１０人に成長したら、４人または５人で構成される２つのチームに分割する。
    > - 空っぽのチームは決して作らない。
    > - ９人以上をサポートするマネジャーを決してそのままにしない。

> 2.2.1 成長するチームの４段階

- **遅延**：ハードワークにもかかわらず進捗に乏しく、士気も低い。ユーザーは不満を口にしている。
- **現状維持**：重要な仕事は片づけているが負債の解消には取り組めていない、もしくは新しいプロジェクトには取り掛かれない。チームの士気は多少あり、一生懸命働いており、ユーザーも一見幸せそうに見えるかもしれないが、それはユーザーが「助けを求めても何も起こらない」と学んでいるから。
- **負債返済中**：負債の解消に取り組んでおり、その取り組みにより負債が返済されることでさらに返済するための時間が得られる。
- **革新**：技術的負債が少なく、士気も高く、仕事の大半がユーザーのニーズを満たしている。

> **2.2.2 システムの改善と戦術的支援に取り組む**

> マネジャーとしてのあなたの責務は、以降に向けたシステムの改善策を特定し、取り組むことだ。さらに、その取り組みが魔法のように機能するためのゆとりを作るべく、チームをできる限りサポートすることである。

- **遅延 -> 現状維持**：人を新規に採用して、会社全体の能力を増やす。社内の既存リソースから引き出すことは、人は代替可能ではないし、活躍できるチームに所属していることが大半なので、最適化を目的に再編成することには懐疑的になった方がいい。
- **現状維持中**：より多くのことを成し遂げられるようにチームの力を結集させること、および技術的負債を返済し始められるまで現在の仕事を減らすこと。戦術的には、生産性を個人単位からチーム全体へと支援することが重要。
- **負債返済中**：ゆとりを作ることで複利の価値を高めながらシステムの改善を進め、かつユーザを支援する方法を見つけること。ステークホルダーはチームの新しい進捗を待ってそわそわしているため、マネジャーの仕事はその焦りによってチームが後戻り（現状維持、遅延）することを防ぐこと。
- **革新**：チームの予定に十分なゆとりを持たせ、品質を保ちながらイノベーションに継続して取り組めるようにする。チームで取り組んでいる仕事が評価されるようにし、「技術で遊んでいるチーム」という印象をまわりに抱かせないようユーザーへの価値提供に意識を向け続ける。

> 難しいのは、計画を支えるあなたの信念を維持することである。その信念には、あなた自身の深淵と、組織全体のより広範な信念の両方が含まれる。あるときには、組織再編を通じて、責任を洗い流したくなるかもしれない。あるいは、新しい仕事に逃れたくなるかもしれない。だが、そうしてしまったら学びの場を逃すことになる。決めた道を進もう。

刺さる。

> 2.2.3 力を結集する

それぞれの制約に対して、一度に一つのチームを優先する。すべてを同時に動かそうとしない。

> 組織は決して成長をやめないが、チームの成長は最終状態に行き着くと止まってしまうことに注意しよう。

> 2.3 トップダウンによる全体最適に対抗する

主題：

> 「技術的負債を返済したら、余剰になったメンバーを他のチームに移したほうがいいんじゃないか？」

- チームの結束力を育むには時間がかかる。かつ持続的な生産性を生むハイパフォーマンスチームを解体することは生産性の大きな損失につながる。チームを変えないことは停滞につながるが、チームの結束を守るために成長を控えめにする必要があるかもしれない。ただし、再結束のためのコストを考慮した上でチームを変えるのであれば問題はない。重要なのは（繰り返しになるが）**ハイパフォーマンスなチームが再び結束するためのコストが何度も発生しないようにする**こと。
- そのチームの **「変動費」と「固定費」**を意識する。ハイパフォーマンスなチームは「固定費」が大きく「変動費」が小さい。１人動かしたときにそのチームが機能し続けられるか、という観点で、リスクが大きい。また、仕事においても以前から継続している仕事や契約済みの仕事などが「固定費」にあたる。
- 人を増やす前に**ゆとり（余裕）を生む**。その余剰を活用し、さらにチーム内を改善する。自律的に改善を繰り返すチームが増えていくことは組織全体のスループットを考えるときに考慮すべき事項が減るということ。

**Q. では、どうやってゆとりを生む？**

- チームのスコープを動かす。「人を急速に動かす」ことより「スコープを急速に動かす」ことの方が効果的かつ混乱が少ない。再結束のコストを避け、既存のメンタルモデルも維持できる。また、戻すときも人員変更で起こる混乱より、ワークロードの変更で起こる混乱の方が少ない上、いつでも戻せる。
- 支援が必要な領域（チーム）に一定期間、個人をローテーションさせること。メンバーの、チームに対するアイデンティティとメンバーシップを維持しつつ、他チームの支援に集中できる。（KW：スウォーミングモデル）

> **2.4.3 エントロピーを管理する方法**

> **[!TODO]**
> 採用の話は気分が乗った時に読む

- 突発的な割り込みに対抗する。中断を小さい領域に集約して、その領域を自動化していく。次に、質問可能なエンジニアでローテーションを組みつつ、その他の割り込みには対応しないよう言う。オーナーレジストリ（誰が何を知っているのか）を用意することで、誤った問い合わせ先への連絡を防ぎつつ、通知の自動化に取り組むときにも役立つ。
- 突発したミーティングへの参加依頼については、事前に「仕事に集中するための大きな時間枠を用意しておく」ことで対応する。
- 一貫して利用可能なドキュメントを用意することで、それを読む文化と、実用に足るドキュメント検索の仕組みを構築するのもよい。
- システムの再実装を避けるために、ソフトウェアを柔軟に設計すること。「失敗を許容し、ポリシーをレイヤー化する」。「ここまでは確定（近い将来に変更される可能性は低い）、ここから先は変わる可能性がある」という現実世界でのポリシーをコードやアーキテクチャにも反映するアイデアもある。

ふと思ったこと：自分のトレーニング期間は２週間～１ヵ月くらいで見積もることが多かったが、他の人のトレーニングを考えるときは３ヵ月～６ヵ月くらいで見積もったほうがいいんだろう。

> **2.5 どこに組織的リスクを隠しておくか**

> 組織的負債は技術的負債の志士基盤で、偏見を抱えた面接プロセスや不公平な報酬の仕組みなどを表す。これは組織が潜在能力を発揮するのを妨げる、システム的な問題である。技術的負債と同じく、真っ先に取り組むべき問題ではないため、組織的負債は運命の瞬間が訪れるまで残り続ける。

> あなたの部下が直面している課題が、あなたの抱えるリストでは優先度が低いとき、心からの興味を持ち続けるにはどうすればいいのか？
> ...
> もっともうまくいったのは、改善すべき領域をいくつか見つけて、そこで確実に進捗を出し、残りはうまくいかなくてもよいと自分を許すことだ。

- 計画は明示的にまとめておき、順当に進んだ場合の進捗について上司と意識を合わせ、共通認識を持つことが重要。
- チームごとに安定を確保してから、焦点を別のチームに移す。うまく機能しているチームへのリスク転嫁を避ける。

> 2.6 サクセッションプランニング

> サクセッションプランニングとは、自分がいなくても組織が機能する方法を考え抜き、自分がいないことで生じるギャップをドキュメント化して埋めることだ。

ただ後継者を育成するだけではなく、ドキュメント化することが重要！

自分が何をしているのか理解するためには

- カレンダーを眺めて、ミーティングでの役割を書き留める。議題に責務を持つ、のような明らかな役割だけでなく、他人のアイデアを最初に指示する人になる、のような、より細かい役割もある。
- ミーティング以外のことを書き留める。
- 半年間で繰り返し行われてきたプロセスを振り返り、役割をドキュメントにまとめる。
- 自分がサポートしているエンジニアごとに、以下の問いを考える。
  - 自分のスキルと行動が、彼らをどの領域で補完しているのか？
  - 彼らはあなたの何に頼っているのか？（承認、方向性のアドバイス、技術的経験、など）
- チャットやメールから、自分宛ての要求や質問を把握する
- TODOリストを確認する、
- 自分に最も重要な外部との関係性を理解する。

見つかった各項目について、その仕事を引き受けられるエンジニア（もしくは引き受けられる可能性のある複数のエンジニア）を見つけ、打消し線を引く。打消し線が引けなかった項目は以下に分ける（ギャップとは、自分と他人がもつ役割の差を指す）。

- 簡単に埋められる（補足資料や簡単な説明）ギャップをもつ項目。４時間以内に埋められるもの。
- リスクが高いギャップを持つ項目。数か月にわたる継続的な努力が必要なもの。

**サクセッションプランニング**は年１回実施することで、持続可能な組織が育つだけでなく、より大きな役割を担えるよう自分が成長し続けるための時間を確保できる。

### 第3章：ツール

#### 3.1.1 ストックとフロー

> すべてのフローは速度であり、ストックは量であると念頭に置くことがベストプラクティスである。

#### 3.1.2 開発者のベロシティ

> 例えば、準備可能のコミットのバックログがなければ、単位時間当たりのデプロイ数を増やすことに価値はないかもしれない。同様に、単位時間当たりの欠陥数が常に少なければ、復旧時間を短縮してもシステムへの影響はほとんどないだろう。

理想的なフローと現状の課題がどこにあるかは別のフェーズで考えるべき（現状の課題がないから、そのストック/フローは省略してもよい、ではない）

どこかで https://ncase.me/loopy/ がおすすめされていた

#### 3.2 プロダクトマネジメント：問題の発見、問題の選択、解決の検証

> 運用に優れるプロダクトマネジャーにたくさん出会ってきたが、ユーザのニーズに深く入り込みながら高いレベルで運用できるマネジャーはほとんどいない。同様に、ユーザーのニーズに基づいて仕事を進めるエンジニアリングマネジャーは多いが、チーム内で問題が起きた時にユーザに注意を払えるマネジャーはほとんどいない。

> ...そう、「心躍る」が「恐ろしい」と同義になる瞬間でもある・

#### 3.2.1 問題の発見

- **ユーザのペイン**：ユーザが体験する問題は何か？
- **ユーザの目的**：ユーザがシステムを利用したくなる同期は何か？どうすればユーザーがゴールに到達できるか？
- **ベンチマーク**：競合他社と自社を比較して、特に弱い部分はないか？
- **集団**：全体的な傾向を把握する分析ではなく、背後に隠れたデータを掘り下げることも重要。
- **競争優位**：自社が特に強い分野を理解する。
- **モート**：競争優位のより極端なバージョンで、モートにより他社が簡単には提供できない事業を追求できる。自社のモートと競合のモートを考える必要がある。
- **複利レバレッジ**：時間をかけることでレバレッジで複利を生み出せる要素は何か？少なくとも２回は恩恵を享受できる方法を見つける。

#### 3.2.2 問題の選択

- **ラウンドを生き残る**：現在のラウンドを生き残るためには、何をすればいいか？（収益を伸ばす、採用率を上げる、など）
- **次のラウンドを生き残る**：短期的な速度を優先して長期的なスループットを減らす方法はいくつかあるが、品質とトレードオフになる。
- **勝利のラウンド**：生き残るだけでなく、ラウンドで勝利するため、勝利に向かっていることを確実にするにはどのような作業が必要か？
- **異なる期間を検討する**：やるラウンドはなく、それを達成する時間軸という意味で。問題に取り掛かる順序について意見の相違が生まれる場合、その対立の根底にあるのは前提となる期間が異なることが多い。
- **業界トレンド**：業界のトレンドを有利に活用できるポジションはどこか、少なくとも近い将来、その仕事のやり直しを避けられるポジションは？
- **費用対効果**：成功を手に入れるのに必要なコストと、得られる効果（複利効果も忘れずに）について、短期的と中長期的の２軸から考慮する。
- **学習のための実験**：これからの問題の選択を容易にするために、今学べることは何か？
  
  